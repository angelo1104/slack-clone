{"ast":null,"code":"import firebaseAdmin from \"firebase-admin\";\nimport nookies from \"nookies\";\n\nif (!firebaseAdmin.apps.length) {\n  firebaseAdmin.initializeApp({\n    credential: firebaseAdmin.credential.cert({\n      privateKey: process.env.FIREBASE_PRIVATE_KEY,\n      clientEmail: \"firebase-adminsdk-zb7oj@slack-f1af1.iam.gserviceaccount.com\",\n      projectId: \"slack-f1af1\"\n    }),\n    databaseURL: \"https://slack-f1af1.firebaseio.com\"\n  });\n}\n\n;\n\nconst verifyUser = ctx => {\n  try {\n    const cookies = nookies.get(ctx);\n    const token = firebaseAdmin.auth().verifyIdToken(cookies[\"user-token\"]);\n    return token;\n  } catch (error) {\n    throw new Error(error.message);\n  }\n};\n\nexport { firebaseAdmin, verifyUser };","map":{"version":3,"sources":["/home/madhav/Documents/Web Development/NextJS/slack-clone/src/firebase/firebaseAdmin.ts"],"names":["firebaseAdmin","nookies","apps","length","initializeApp","credential","cert","privateKey","process","env","FIREBASE_PRIVATE_KEY","clientEmail","projectId","databaseURL","verifyUser","ctx","cookies","get","token","auth","verifyIdToken","error","Error","message"],"mappings":"AAAA,OAAOA,aAAP,MAA0B,gBAA1B;AAEA,OAAOC,OAAP,MAAoB,SAApB;;AAIA,IAAI,CAACD,aAAa,CAACE,IAAd,CAAmBC,MAAxB,EAA+B;AAC7BH,EAAAA,aAAa,CAACI,aAAd,CAA4B;AAC1BC,IAAAA,UAAU,EAAEL,aAAa,CAACK,UAAd,CAAyBC,IAAzB,CAA8B;AACxCC,MAAAA,UAAU,EAAEC,OAAO,CAACC,GAAR,CAAYC,oBADgB;AAExCC,MAAAA,WAAW,EAAE,6DAF2B;AAGxCC,MAAAA,SAAS,EAAE;AAH6B,KAA9B,CADc;AAM1BC,IAAAA,WAAW,EAAE;AANa,GAA5B;AAQD;;AAAA;;AAED,MAAMC,UAAU,GAAIC,GAAD,IAAkC;AACpD,MAAI;AACF,UAAMC,OAAO,GAAGf,OAAO,CAACgB,GAAR,CAAYF,GAAZ,CAAhB;AACA,UAAMG,KAAK,GAAGlB,aAAa,CAACmB,IAAd,GAAqBC,aAArB,CAAmCJ,OAAO,CAAC,YAAD,CAA1C,CAAd;AAEA,WAAOE,KAAP;AACD,GALD,CAKE,OAAOG,KAAP,EAAc;AACb,UAAM,IAAIC,KAAJ,CAAUD,KAAK,CAACE,OAAhB,CAAN;AACF;AACD,CATD;;AAWA,SAAQvB,aAAR,EAAuBc,UAAvB","sourcesContent":["import firebaseAdmin from \"firebase-admin\";\nimport { GetServerSidePropsContext } from \"next-redux-wrapper\";\nimport nookies from \"nookies\";\nimport { AnyAction, Store } from \"redux\";\nimport { State } from \"../redux/store\";\n\nif (!firebaseAdmin.apps.length){\n  firebaseAdmin.initializeApp({\n    credential: firebaseAdmin.credential.cert({\n      privateKey: process.env.FIREBASE_PRIVATE_KEY,\n      clientEmail: \"firebase-adminsdk-zb7oj@slack-f1af1.iam.gserviceaccount.com\",\n      projectId: \"slack-f1af1\",\n    }),\n    databaseURL: \"https://slack-f1af1.firebaseio.com\"\n  })\n};\n\nconst verifyUser = (ctx: GetServerSidePropsContext)=>{\n try {\n   const cookies = nookies.get(ctx)\n   const token = firebaseAdmin.auth().verifyIdToken(cookies[\"user-token\"]);\n\n   return token;\n } catch (error) {\n    throw new Error(error.message);\n }\n}\n\nexport {firebaseAdmin, verifyUser}"]},"metadata":{},"sourceType":"module"}